 <!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="lib/osc-browser.js"></script>
  <script src="lib/smoothie.js"></script>
</head>
<body>
  <canvas id="mycanvas" width="560" height="340">
  </canvas>

  <script>
    var timeseries = new TimeSeries();
    var smoothie = new SmoothieChart({
      minValue: 0,
      maxValue: 127,
      interpolation: 'linear',
      millisPerPixel: 5,
    });

    var oscPort = new osc.WebSocketPort({
      url: 'ws://127.0.0.1:2794',
    });

    oscPort.on('message', function (message) {
      switch (message.address) {
        case '/note_on':
          break;
        case '/ctrl':
          let [chan, ctrl, val] = message.args;
          timeseries.append(Date.now(), val);
          break;
        case '/note_off':
          break;
      }
    });

    let canvas = document.getElementById('mycanvas');
    smoothie.addTimeSeries(timeseries, {
      lineWidth: 2,
      strokeStyle: 'red',
    });
    smoothie.streamTo(canvas);
    oscPort.open();

  </script>
</body>
</html>
